<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ôõ Chess Arena</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ===== LOBBY ===== -->
    <div id="lobby" class="screen active">
        <div class="lobby-box">
            <div class="logo">‚ôõ</div>
            <h1>Chess<span>Arena</span></h1>
            <p class="subtitle">Jouez en ligne ou contre l'IA</p>

            <div class="lobby-content" id="lobby-content">
                <!-- Mode -->
                <div class="btn-group">
                    <button class="chip active" data-mode="online">üåê En ligne</button>
                    <button class="chip" data-mode="ai">ü§ñ Contre l'IA</button>
                </div>

                <!-- Time -->
                <div class="section">
                    <div class="section-label">‚è± Cadence</div>
                    <div class="btn-group">
                        <button class="chip-sm" data-time="0">‚àû</button>
                        <button class="chip-sm" data-time="60">1'</button>
                        <button class="chip-sm" data-time="180">3'</button>
                        <button class="chip-sm active" data-time="300">5'</button>
                        <button class="chip-sm" data-time="600">10'</button>
                        <button class="chip-sm" data-time="900">15'</button>
                        <button class="chip-sm" data-time="1800">30'</button>
                    </div>
                </div>

                <!-- Online actions -->
                <div id="online-actions">
                    <button id="btn-create" class="btn-main">‚öî Cr√©er une partie</button>
                    <div class="divider"><span>ou</span></div>
                    <div class="join-row">
                        <input type="text" id="input-room" placeholder="CODE" maxlength="5" autocomplete="off" spellcheck="false">
                        <button id="btn-join" class="btn-accent">‚Üí</button>
                    </div>
                </div>

                <!-- AI actions -->
                <div id="ai-actions" class="hidden">
                    <div class="section">
                        <div class="section-label">üéØ Difficult√©</div>
                        <div class="btn-group">
                            <button class="chip-sm diff" data-diff="1"><i class="dot green"></i>Facile</button>
                            <button class="chip-sm diff active" data-diff="2"><i class="dot yellow"></i>Moyen</button>
                            <button class="chip-sm diff" data-diff="3"><i class="dot orange"></i>Difficile</button>
                            <button class="chip-sm diff" data-diff="4"><i class="dot red"></i>Expert</button>
                        </div>
                    </div>
                    <div class="section">
                        <div class="section-label">‚ôî Couleur</div>
                        <div class="btn-group">
                            <button class="chip-sm color-pick active" data-color="white">‚¨ú Blancs</button>
                            <button class="chip-sm color-pick" data-color="black">‚¨õ Noirs</button>
                            <button class="chip-sm color-pick" data-color="random">üé≤ Al√©atoire</button>
                        </div>
                    </div>
                    <button id="btn-play-ai" class="btn-main">ü§ñ Jouer</button>
                </div>
            </div>

            <!-- Status -->
            <div id="lobby-status" class="toast hidden"></div>

            <!-- Waiting -->
            <div id="waiting-panel" class="hidden">
                <div class="code-display">
                    <span class="code-label">Code du salon</span>
                    <div id="display-room-code" class="code-value">-----</div>
                    <button id="btn-copy-code" class="btn-sm">üìã Copier</button>
                </div>
                <div class="spinner-wrap">
                    <div class="spinner"></div>
                    <p>En attente d'un adversaire‚Ä¶</p>
                </div>
                <button id="btn-cancel" class="btn-sm btn-red">Annuler</button>
            </div>
        </div>
    </div>

    <!-- ===== GAME ===== -->
    <div id="game" class="screen">
        <div class="game-col">

            <!-- Opponent -->
            <div class="player-row">
                <div class="indicator" id="opponent-indicator"></div>
                <span class="player-name" id="opponent-label">Adversaire</span>
                <div class="captured-row" id="opponent-captured-list"></div>
                <span class="advantage" id="opponent-advantage"></span>
                <span class="timer" id="opponent-timer"></span>
            </div>

            <!-- Board -->
            <div class="board-wrap">
                <div class="labels-col" id="labels-left"></div>
                <div>
                    <div class="labels-row" id="labels-top"></div>
                    <div class="board" id="board"></div>
                    <div class="labels-row" id="labels-bottom"></div>
                </div>
                <div class="labels-col" id="labels-right"></div>
            </div>

            <!-- Self -->
            <div class="player-row">
                <div class="indicator" id="self-indicator"></div>
                <span class="player-name" id="self-label">Vous</span>
                <div class="captured-row" id="self-captured-list"></div>
                <span class="advantage" id="self-advantage"></span>
                <span class="timer" id="self-timer"></span>
            </div>

            <!-- Status + actions -->
            <div class="status-row">
                <button id="btn-back-menu" class="btn-sm hidden">‚Ü© Menu</button>
                <div class="status-text" id="game-status">En attente‚Ä¶</div>
                <button id="btn-resign" class="btn-sm btn-red">üè≥ Abandon</button>
            </div>

        </div>

        <!-- Move history side panel (desktop) -->
        <div class="history-panel" id="move-history">
            <div class="history-title">Historique</div>
            <div class="moves-list" id="moves-list"></div>
        </div>

        <!-- Promotion -->
        <div id="promotion-dialog" class="overlay hidden">
            <div class="dialog">
                <h3>Promotion</h3>
                <div class="promo-row" id="promotion-choices"></div>
            </div>
        </div>

        <!-- Game over -->
        <div id="game-over" class="overlay hidden">
            <div class="dialog">
                <div class="go-icon" id="game-over-icon">üèÜ</div>
                <h2 id="game-over-title">Partie termin√©e</h2>
                <p id="game-over-message"></p>
                <button id="btn-new-game" class="btn-main">Nouvelle partie</button>
            </div>
        </div>
    </div>

    <script src="chess.js"></script>
    <script src="ai.js"></script>
    <script src="app.js"></script>
</body>
</html>